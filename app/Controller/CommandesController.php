<?phpclass CommandesController extends AppController{public $uses=array('Panier','Commande');function commander($total) { $username=$this->Session->read('username'); //verification de l'utilisateur if(!isset($username)) { throw new NotFoundException();  }    $user = $this->Session->read('username');if(isset($user)){$pr_panier=$this->Panier->find('all',array('conditions'=>array('user'=>$user)));$nombre=$this->Commande->find('count',array('conditions'=>array('nom_comm'=>$user)));$co=$this->Commande->find('all');foreach($pr_panier as $v){if($nombre==0){$this->Commande->save(array('nom_comm'=>$v['Panier']['user'],'prod_comm'=>$v['Panier']['name'],'qte_prod_comm'=>$v['Panier']['qte'],'prix_prod_comm'=>$v['Panier']['prix'])); }foreach($co as $d){if($v['Panier']['name']!=$d['Commande']['prod_comm'] and $d['Commande']['nom_comm']== $user){ $this->Commande->save(array('nom_comm'=>$v['Panier']['user'],'prod_comm'=>$v['Panier']['name'],'qte_prod_comm'=>$v['Panier']['qte'],'prix_prod_comm'=>$v['Panier']['prix'])); }}  }  $comm=$this->Commande->find('all',array('conditions'=>array('nom_comm'=>$user))); $this->set('comm',$comm); } }function admin_recevoir($nom){$comm=$this->Commande->find('all',array('limit' => 5),array('conditions'=>array('nom_comm'=>$nom)));$this->set('comm',$comm);}}?>