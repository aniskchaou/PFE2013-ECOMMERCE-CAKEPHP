<?phpclass ProduitsController  extends  AppController{function admin_index(){$this->paginate=array('Produit'=>array('limit'=>1));$page=$this->Paginate('Produit');$this->set('produits',$page);}function admin_delete($id){$this->Produit->delete($id);$this->Session->setFlash("page supprimer ","notif");$this->redirect($this->referer());}/*function admin_edit($id=null){if(empty($this->request->data)){$this->data=$this->Page->read(null,$id);}else{if($this->Page->save($this->data)){$this->Session->setFlash('page a ete modifie',"notif");$this->redirect(array('action'=>'admin_index'));}}}*/function admin_menu(){}function produit(){$produits=$this->Produit->find('all');$this->set('produits',$produits);return $produits;}function admin_ajouter(){if($this->request->is('post')){$data=$this->request->data;//nom de fichier$dir="photo_de_profile"//si le fichier n'existe pasif(!file_exists($dir))mkdir($dir,0777);$dir .=$this->Session->read('id');if(!file_exists($dir))mkdir($dir,0777);$f=explode('.',$data['Produit']['file']['name']);$ext='.'.end($f);$filename=Inflector::slug(implode('.',array_slice($f,0,-1)),'-');//suvegrage$success=$this->Produit->save(array('name'=>$data['Produit']['name'],'url'=>date('Y').'/'.date('m').'/'.$filename.$ext,'ecran'=>$data['Produit']['ecran'],'cartegraphique'=>$data['Produit']['cartegraphique'],'reseau'=>$data['Produit']['reseau'],'prix'=>$data['Produit']['prix'],'nom'=>$data['Produit']['nom'],'qte_stock'=>$data['Produit']['qte_stock']));if($success){move_uploaded_file($data['Produit']['file']['tmp_name'],$dir.DS.$filename.$ext);}else{}}}function rechereche($nom){echo $nom;}function admin_remise(){$remise=$this->Produit->find('all',array('conditions'=>array('remise'=> 'true')));$this->set('remise',$remise);}function admin_ajouterremise($id){if($this->request->is('put')){$this->Produit->save($this->request->data);$this->Produit->saveField('remise','true');$this->Session->setFlash('produit est en remsie',"notif");$this->redirect(array('action'=>'admin_index'));}$this->Produit->id=$id;$this->data=$this->Produit->read();}function admin_stock(){$stock=$this->Produit->find('all');$this->set('stock',$stock);}}?>